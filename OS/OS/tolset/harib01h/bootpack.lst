     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_io_load_eflags
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_io_out8
    10 00000000                                 	EXTERN	_io_store_eflags
    11 00000000                                 [FILE "bootpack.c"]
    12                                          [SECTION .text]
    13 00000000                                 	GLOBAL	_HariMain
    14 00000000                                 _HariMain:
    15 00000000 55                              	PUSH	EBP
    16 00000001 89 E5                           	MOV	EBP,ESP
    17 00000003 E8 00000271                     	CALL	_init_palette
    18 00000008 68 000000AB                     	PUSH	171
    19 0000000D 68 0000013F                     	PUSH	319
    20 00000012 6A 00                           	PUSH	0
    21 00000014 6A 00                           	PUSH	0
    22 00000016 6A 0E                           	PUSH	14
    23 00000018 68 00000140                     	PUSH	320
    24 0000001D 68 000A0000                     	PUSH	655360
    25 00000022 E8 000002ED                     	CALL	_boxfill8
    26 00000027 68 000000AC                     	PUSH	172
    27 0000002C 68 0000013F                     	PUSH	319
    28 00000031 68 000000AC                     	PUSH	172
    29 00000036 6A 00                           	PUSH	0
    30 00000038 6A 08                           	PUSH	8
    31 0000003A 68 00000140                     	PUSH	320
    32 0000003F 68 000A0000                     	PUSH	655360
    33 00000044 E8 000002CB                     	CALL	_boxfill8
    34 00000049 83 C4 38                        	ADD	ESP,56
    35 0000004C 68 000000AD                     	PUSH	173
    36 00000051 68 0000013F                     	PUSH	319
    37 00000056 68 000000AD                     	PUSH	173
    38 0000005B 6A 00                           	PUSH	0
    39 0000005D 6A 07                           	PUSH	7
    40 0000005F 68 00000140                     	PUSH	320
    41 00000064 68 000A0000                     	PUSH	655360
    42 00000069 E8 000002A6                     	CALL	_boxfill8
    43 0000006E 68 000000C7                     	PUSH	199
    44 00000073 68 0000013F                     	PUSH	319
    45 00000078 68 000000AE                     	PUSH	174
    46 0000007D 6A 00                           	PUSH	0
    47 0000007F 6A 08                           	PUSH	8
    48 00000081 68 00000140                     	PUSH	320
    49 00000086 68 000A0000                     	PUSH	655360
    50 0000008B E8 00000284                     	CALL	_boxfill8
    51 00000090 83 C4 38                        	ADD	ESP,56
    52 00000093 68 000000B0                     	PUSH	176
    53 00000098 6A 3B                           	PUSH	59
    54 0000009A 68 000000B0                     	PUSH	176
    55 0000009F 6A 03                           	PUSH	3
    56 000000A1 6A 07                           	PUSH	7
    57 000000A3 68 00000140                     	PUSH	320
    58 000000A8 68 000A0000                     	PUSH	655360
    59 000000AD E8 00000262                     	CALL	_boxfill8
    60 000000B2 68 000000C4                     	PUSH	196
    61 000000B7 6A 02                           	PUSH	2
    62 000000B9 68 000000B0                     	PUSH	176
    63 000000BE 6A 02                           	PUSH	2
    64 000000C0 6A 07                           	PUSH	7
    65 000000C2 68 00000140                     	PUSH	320
    66 000000C7 68 000A0000                     	PUSH	655360
    67 000000CC E8 00000243                     	CALL	_boxfill8
    68 000000D1 83 C4 38                        	ADD	ESP,56
    69 000000D4 68 000000C4                     	PUSH	196
    70 000000D9 6A 3B                           	PUSH	59
    71 000000DB 68 000000C4                     	PUSH	196
    72 000000E0 6A 03                           	PUSH	3
    73 000000E2 6A 0F                           	PUSH	15
    74 000000E4 68 00000140                     	PUSH	320
    75 000000E9 68 000A0000                     	PUSH	655360
    76 000000EE E8 00000221                     	CALL	_boxfill8
    77 000000F3 68 000000C3                     	PUSH	195
    78 000000F8 6A 3B                           	PUSH	59
    79 000000FA 68 000000B1                     	PUSH	177
    80 000000FF 6A 3B                           	PUSH	59
    81 00000101 6A 0F                           	PUSH	15
    82 00000103 68 00000140                     	PUSH	320
    83 00000108 68 000A0000                     	PUSH	655360
    84 0000010D E8 00000202                     	CALL	_boxfill8
    85 00000112 83 C4 38                        	ADD	ESP,56
    86 00000115 68 000000C5                     	PUSH	197
    87 0000011A 6A 3B                           	PUSH	59
    88 0000011C 68 000000C5                     	PUSH	197
    89 00000121 6A 02                           	PUSH	2
    90 00000123 6A 00                           	PUSH	0
    91 00000125 68 00000140                     	PUSH	320
    92 0000012A 68 000A0000                     	PUSH	655360
    93 0000012F E8 000001E0                     	CALL	_boxfill8
    94 00000134 68 000000C5                     	PUSH	197
    95 00000139 6A 3C                           	PUSH	60
    96 0000013B 68 000000B0                     	PUSH	176
    97 00000140 6A 3C                           	PUSH	60
    98 00000142 6A 00                           	PUSH	0
    99 00000144 68 00000140                     	PUSH	320
   100 00000149 68 000A0000                     	PUSH	655360
   101 0000014E E8 000001C1                     	CALL	_boxfill8
   102 00000153 83 C4 38                        	ADD	ESP,56
   103 00000156 68 000000B0                     	PUSH	176
   104 0000015B 68 0000013C                     	PUSH	316
   105 00000160 68 000000B0                     	PUSH	176
   106 00000165 68 00000111                     	PUSH	273
   107 0000016A 6A 0F                           	PUSH	15
   108 0000016C 68 00000140                     	PUSH	320
   109 00000171 68 000A0000                     	PUSH	655360
   110 00000176 E8 00000199                     	CALL	_boxfill8
   111 0000017B 68 000000C4                     	PUSH	196
   112 00000180 68 00000111                     	PUSH	273
   113 00000185 68 000000B1                     	PUSH	177
   114 0000018A 68 00000111                     	PUSH	273
   115 0000018F 6A 0F                           	PUSH	15
   116 00000191 68 00000140                     	PUSH	320
   117 00000196 68 000A0000                     	PUSH	655360
   118 0000019B E8 00000174                     	CALL	_boxfill8
   119 000001A0 83 C4 38                        	ADD	ESP,56
   120 000001A3 68 000000C5                     	PUSH	197
   121 000001A8 68 0000013C                     	PUSH	316
   122 000001AD 68 000000C5                     	PUSH	197
   123 000001B2 68 00000111                     	PUSH	273
   124 000001B7 6A 07                           	PUSH	7
   125 000001B9 68 00000140                     	PUSH	320
   126 000001BE 68 000A0000                     	PUSH	655360
   127 000001C3 E8 0000014C                     	CALL	_boxfill8
   128 000001C8 68 000000C5                     	PUSH	197
   129 000001CD 68 0000013D                     	PUSH	317
   130 000001D2 68 000000B0                     	PUSH	176
   131 000001D7 68 0000013D                     	PUSH	317
   132 000001DC 6A 07                           	PUSH	7
   133 000001DE 68 00000140                     	PUSH	320
   134 000001E3 68 000A0000                     	PUSH	655360
   135 000001E8 E8 00000127                     	CALL	_boxfill8
   136 000001ED 83 C4 38                        	ADD	ESP,56
   137 000001F0 6A 54                           	PUSH	84
   138 000001F2 68 0000009D                     	PUSH	157
   139 000001F7 6A 2B                           	PUSH	43
   140 000001F9 6A 75                           	PUSH	117
   141 000001FB 6A 01                           	PUSH	1
   142 000001FD 68 00000140                     	PUSH	320
   143 00000202 68 000A0000                     	PUSH	655360
   144 00000207 E8 00000108                     	CALL	_boxfill8
   145 0000020C 6A 54                           	PUSH	84
   146 0000020E 68 000000C9                     	PUSH	201
   147 00000213 6A 2B                           	PUSH	43
   148 00000215 68 000000A1                     	PUSH	161
   149 0000021A 6A 02                           	PUSH	2
   150 0000021C 68 00000140                     	PUSH	320
   151 00000221 68 000A0000                     	PUSH	655360
   152 00000226 E8 000000E9                     	CALL	_boxfill8
   153 0000022B 83 C4 38                        	ADD	ESP,56
   154 0000022E 68 00000080                     	PUSH	128
   155 00000233 68 0000009D                     	PUSH	157
   156 00000238 6A 57                           	PUSH	87
   157 0000023A 6A 75                           	PUSH	117
   158 0000023C 6A 04                           	PUSH	4
   159 0000023E 68 00000140                     	PUSH	320
   160 00000243 68 000A0000                     	PUSH	655360
   161 00000248 E8 000000C7                     	CALL	_boxfill8
   162 0000024D 68 00000080                     	PUSH	128
   163 00000252 68 000000C9                     	PUSH	201
   164 00000257 6A 57                           	PUSH	87
   165 00000259 68 000000A1                     	PUSH	161
   166 0000025E 6A 03                           	PUSH	3
   167 00000260 68 00000140                     	PUSH	320
   168 00000265 68 000A0000                     	PUSH	655360
   169 0000026A E8 000000A5                     	CALL	_boxfill8
   170 0000026F 83 C4 38                        	ADD	ESP,56
   171 00000272                                 L2:
   172 00000272 E8 [00000000]                   	CALL	_io_hlt
   173 00000277 EB F9                           	JMP	L2
   174                                          [SECTION .data]
   175 00000000                                 _table_rgb.0:
   176 00000000 00                              	DB	0
   177 00000001 00                              	DB	0
   178 00000002 00                              	DB	0
   179 00000003 F3                              	DB	-13
   180 00000004 53                              	DB	83
   181 00000005 25                              	DB	37
   182 00000006 81                              	DB	-127
   183 00000007 BC                              	DB	-68
   184 00000008 06                              	DB	6
   185 00000009 FF                              	DB	-1
   186 0000000A BA                              	DB	-70
   187 0000000B 08                              	DB	8
   188 0000000C 05                              	DB	5
   189 0000000D A6                              	DB	-90
   190 0000000E F0                              	DB	-16
   191 0000000F FF                              	DB	-1
   192 00000010 00                              	DB	0
   193 00000011 FF                              	DB	-1
   194 00000012 00                              	DB	0
   195 00000013 FF                              	DB	-1
   196 00000014 FF                              	DB	-1
   197 00000015 FF                              	DB	-1
   198 00000016 FF                              	DB	-1
   199 00000017 FF                              	DB	-1
   200 00000018 C6                              	DB	-58
   201 00000019 C6                              	DB	-58
   202 0000001A C6                              	DB	-58
   203 0000001B 84                              	DB	-124
   204 0000001C 00                              	DB	0
   205 0000001D 00                              	DB	0
   206 0000001E 00                              	DB	0
   207 0000001F 84                              	DB	-124
   208 00000020 00                              	DB	0
   209 00000021 84                              	DB	-124
   210 00000022 84                              	DB	-124
   211 00000023 00                              	DB	0
   212 00000024 00                              	DB	0
   213 00000025 00                              	DB	0
   214 00000026 84                              	DB	-124
   215 00000027 84                              	DB	-124
   216 00000028 00                              	DB	0
   217 00000029 84                              	DB	-124
   218 0000002A 00                              	DB	0
   219 0000002B 84                              	DB	-124
   220 0000002C 84                              	DB	-124
   221 0000002D 84                              	DB	-124
   222 0000002E 84                              	DB	-124
   223 0000002F 84                              	DB	-124
   224                                          [SECTION .text]
   225 00000279                                 	GLOBAL	_init_palette
   226 00000279                                 _init_palette:
   227 00000279 55                              	PUSH	EBP
   228 0000027A 89 E5                           	MOV	EBP,ESP
   229 0000027C 68 [00000000]                   	PUSH	_table_rgb.0
   230 00000281 6A 0F                           	PUSH	15
   231 00000283 6A 00                           	PUSH	0
   232 00000285 E8 00000002                     	CALL	_set_palette
   233 0000028A C9                              	LEAVE
   234 0000028B C3                              	RET
   235 0000028C                                 	GLOBAL	_set_palette
   236 0000028C                                 _set_palette:
   237 0000028C 55                              	PUSH	EBP
   238 0000028D 89 E5                           	MOV	EBP,ESP
   239 0000028F 57                              	PUSH	EDI
   240 00000290 56                              	PUSH	ESI
   241 00000291 53                              	PUSH	EBX
   242 00000292 51                              	PUSH	ECX
   243 00000293 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   244 00000296 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   245 00000299 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   246 0000029C E8 [00000000]                   	CALL	_io_load_eflags
   247 000002A1 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   248 000002A4 E8 [00000000]                   	CALL	_io_cli
   249 000002A9 53                              	PUSH	EBX
   250 000002AA 68 000003C8                     	PUSH	968
   251 000002AF E8 [00000000]                   	CALL	_io_out8
   252 000002B4 39 FB                           	CMP	EBX,EDI
   253 000002B6 58                              	POP	EAX
   254 000002B7 5A                              	POP	EDX
   255 000002B8 7E 12                           	JLE	L11
   256 000002BA                                 L13:
   257 000002BA 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   258 000002BD 89 45 08                        	MOV	DWORD [8+EBP],EAX
   259 000002C0 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   260 000002C3 5B                              	POP	EBX
   261 000002C4 5E                              	POP	ESI
   262 000002C5 5F                              	POP	EDI
   263 000002C6 5D                              	POP	EBP
   264 000002C7 E9 [00000000]                   	JMP	_io_store_eflags
   265 000002CC                                 L11:
   266 000002CC 8A 06                           	MOV	AL,BYTE [ESI]
   267 000002CE 43                              	INC	EBX
   268 000002CF C0 E8 02                        	SHR	AL,2
   269 000002D2 0F B6 C0                        	MOVZX	EAX,AL
   270 000002D5 50                              	PUSH	EAX
   271 000002D6 68 000003C9                     	PUSH	969
   272 000002DB E8 [00000000]                   	CALL	_io_out8
   273 000002E0 8A 46 01                        	MOV	AL,BYTE [1+ESI]
   274 000002E3 C0 E8 02                        	SHR	AL,2
   275 000002E6 0F B6 C0                        	MOVZX	EAX,AL
   276 000002E9 50                              	PUSH	EAX
   277 000002EA 68 000003C9                     	PUSH	969
   278 000002EF E8 [00000000]                   	CALL	_io_out8
   279 000002F4 8A 46 02                        	MOV	AL,BYTE [2+ESI]
   280 000002F7 C0 E8 02                        	SHR	AL,2
   281 000002FA 83 C6 03                        	ADD	ESI,3
   282 000002FD 0F B6 C0                        	MOVZX	EAX,AL
   283 00000300 50                              	PUSH	EAX
   284 00000301 68 000003C9                     	PUSH	969
   285 00000306 E8 [00000000]                   	CALL	_io_out8
   286 0000030B 83 C4 18                        	ADD	ESP,24
   287 0000030E 39 FB                           	CMP	EBX,EDI
   288 00000310 7E BA                           	JLE	L11
   289 00000312 EB A6                           	JMP	L13
   290 00000314                                 	GLOBAL	_boxfill8
   291 00000314                                 _boxfill8:
   292 00000314 55                              	PUSH	EBP
   293 00000315 89 E5                           	MOV	EBP,ESP
   294 00000317 57                              	PUSH	EDI
   295 00000318 56                              	PUSH	ESI
   296 00000319 53                              	PUSH	EBX
   297 0000031A 57                              	PUSH	EDI
   298 0000031B 57                              	PUSH	EDI
   299 0000031C 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   300 0000031F 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   301 00000322 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   302 00000325 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   303 00000328 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   304 0000032B 7F 31                           	JG	L26
   305 0000032D 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   306 00000330 0F AF D9                        	IMUL	EBX,ECX
   307 00000333                                 L24:
   308 00000333 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   309 00000336 39 FA                           	CMP	EDX,EDI
   310 00000338 7F 1B                           	JG	L28
   311 0000033A 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   312 0000033D 01 DE                           	ADD	ESI,EBX
   313 0000033F 01 D6                           	ADD	ESI,EDX
   314 00000341 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   315 00000344                                 L23:
   316 00000344 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   317 00000347 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   318 0000034A 42                              	INC	EDX
   319 0000034B 88 06                           	MOV	BYTE [ESI],AL
   320 0000034D 46                              	INC	ESI
   321 0000034E 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   322 00000351 39 FA                           	CMP	EDX,EDI
   323 00000353 7E EF                           	JLE	L23
   324 00000355                                 L28:
   325 00000355 41                              	INC	ECX
   326 00000356 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   327 00000359 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   328 0000035C 7E D5                           	JLE	L24
   329 0000035E                                 L26:
   330 0000035E 5B                              	POP	EBX
   331 0000035F 5E                              	POP	ESI
   332 00000360 5B                              	POP	EBX
   333 00000361 5E                              	POP	ESI
   334 00000362 5F                              	POP	EDI
   335 00000363 5D                              	POP	EBP
   336 00000364 C3                              	RET
